<project name="FSM-based sentence generation" app="Snap! 4.0, http://snap.berkeley.edu" version="1" uuid="092feae0-3edc-11e4-8a53-9f37f10be7cf"><notes>An example of sentence generation using a finite state machine.</notes><thumbnail>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAB4CAYAAAB1ovlvAAAE/UlEQVR4Xu2aTyt1bRSH1yF/ii9gSGYkBj6AJANJDJAYKwZigqKIwoRMlDEDDEgykOILKBIjYugTEArPu+96z3t4H+fscyZrtfa1R7az1r3W+v2u9t7n3if19c8hHCigpEAKAJWUp2xQAAABQVUBAFSVn+IACAOqCgCgqvwUB0AYUFUAAFXlpzgAwoCqAgCoKj/FARAGVBUAQFX5KQ6AMKCqAACqyk9xAIQBVQUAUFV+igMgDKgqAICq8lMcAGFAVQEAVJWf4gAIA6oKAKCq/BQHQBhQVQAAVeWnOADCgKoCAKgqP8UBEAZUFQBAVfkpDoAwoKoAAKrKT3EAhAFVBQBQVX6KAyAMqCoAgKryUxwAYUBVAQBUlZ/iAAgDqgoAoKr8FAdAGFBVAABV5ac4AMKAqgIAqCo/xQEQBlQVAEBV+SkOgDCgqgAAqspPcQCEAVUFAFBVfooDIAyoKgCAqvJTHAALZOD5+VkGBwdD9vb2tlRUVBS4UrLTALBA/7u7u79lHhwcFLhSstMAsED/AbBA4X6kAWABOr6+vsrHx4cMDQ2F7K2tLSkuLpby8vICVkt2CgDm6f/KyopMTk6GrJeXF/n8/JTKyspwnvlZnssmNhwAc1h/fn4uLS0tIerq6koaGxuzZlxeXkpTU1OIycxNLGE5BgfALAJlPuf9/JKxtLQk09PTIXt5eVmmpqa+rZQtFxj/UwAAf6FhZmZGbm9vJZVKydfXl9TX10tpaWk6+u3tTcrKysJ55t/R+fv7u9zc3EhRUVG4RdfV1cni4iLc/UUBAPwFi8x9vgjC/f39vADKvAKyT/i7dACYBasIwqOjI+nv7w9RT09PUlVVJWtrazI+Pv4tc319XcbGxtIx0Yc7OzvS2dnJJnUWjQEwxnVtb29Pent7Q+Tc3Fx4A1JbW/st8+7uLrwRmZ+fD//f3d2Vvr6+GKsnOwQAY/h/cnIi7e3t6cj7+/v/Afjw8CA1NTXpmNPTU2lra4uxerJDADBP/zc2NmRkZCRknZ2dhS8ora2t4Xxzc1OGh4fzXDHZ4QAY0//j42Pp6OiQ6+traWhoCFkRjBGAo6Oj4fzffcLDw0Pp6uqKuXKywwAwpv/R811JSUnO57ro2S96TTcwMBBz5WSHAWAM/6M9vdnZ2XTkb7986enpCTHRVXFhYSHsHXJkVwAAYxDy85cvzc3Nf826uLgIG9fR5nN08BOt3OICYG6N5PHxUSYmJnJeATNBXV1dlerq6hirJzsEAPPwP7oV57qtxonJo6T7UAB0b7HtAQHQtj/uuwNA9xbbHhAAbfvjvjsAdG+x7QEB0LY/7rsDQPcW2x4QAG374747AHRvse0BAdC2P+67A0D3FtseEABt++O+OwB0b7HtAQHQtj/uuwNA9xbbHhAAbfvjvjsAdG+x7QEB0LY/7rsDQPcW2x4QAG374747AHRvse0BAdC2P+67A0D3FtseEABt++O+OwB0b7HtAQHQtj/uuwNA9xbbHhAAbfvjvjsAdG+x7QEB0LY/7rsDQPcW2x4QAG374747AHRvse0BAdC2P+67A0D3FtseEABt++O+OwB0b7HtAQHQtj/uuwNA9xbbHhAAbfvjvjsAdG+x7QEB0LY/7rsDQPcW2x4QAG374747AHRvse0BAdC2P+67A0D3FtseEABt++O+OwB0b7HtAQHQtj/uuwNA9xbbHvAPCF2zt7jxQhEAAAAASUVORK5CYII=</thumbnail><stage name="Stage" width="480" height="360" costume="0" tempo="60" threadsafe="false" lines="round" codify="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAOhUlEQVR4Xu3VwQkAAAjEMN1/abewn7jAQRC64wgQIECAAIF3gX1fNEiAAAECBAiMAHsCAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQIHLFxAWmhEwHPAAAAAElFTkSuQmCC</pentrails><costumes><list id="2"></list></costumes><sounds><list id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Graph" idx="1" x="0" y="0" heading="90" scale="1" rotation="1" draggable="false" costume="0" color="80,80,80" pen="tip" id="8"><costumes><list id="9"></list></costumes><sounds><list id="10"></list></sounds><variables></variables><blocks></blocks><scripts><script x="20" y="20"><block s="newDiGraph"></block></script><script x="20" y="56"><custom-block s="random sentence from %s"><l>start</l><comment w="224" collapsed="false">Generates a random sentence from the given FSM. Make sure you mark your valid acceptor states in yellow, otherwise this will return false.&#xD;&#xD;State transitions are specified in the edge labels. Empty edge labels denote epsilon transitions.&#xD;&#xD;You can specify multiple words in a transition by separating them with semicolons, e.g. &quot;strawberry;banana;mango&quot;. This also works for epsilon transitions: &quot;;foo;bar;baz&quot;.</comment></custom-block></script><script x="20" y="245"><custom-block s="valid sentence %txt from %s ?"><l></l><l>start</l><comment w="194" collapsed="false">Returns true if the given string can be generated by the FSM, or false otherwise.</comment></custom-block></script></scripts><graph>{&quot;directed&quot;:true,&quot;multigraph&quot;:false,&quot;graph&quot;:[[&quot;__costumes__&quot;,{}]],&quot;nodes&quot;:[{&quot;id&quot;:&quot;start&quot;},{&quot;id&quot;:&quot;a&quot;},{&quot;id&quot;:&quot;b&quot;},{&quot;id&quot;:&quot;c&quot;},{&quot;id&quot;:&quot;d&quot;,&quot;color&quot;:&quot;yellow&quot;}],&quot;links&quot;:[{&quot;source&quot;:0,&quot;target&quot;:1,&quot;label&quot;:&quot;I&quot;},{&quot;source&quot;:1,&quot;target&quot;:2,&quot;label&quot;:&quot;like&quot;},{&quot;source&quot;:2,&quot;target&quot;:3,&quot;label&quot;:&quot;;strawberry;vanilla;chocolate&quot;},{&quot;source&quot;:3,&quot;target&quot;:4,&quot;label&quot;:&quot;ice cream&quot;}]}</graph><nodeattrs></nodeattrs><edgeattrs></edgeattrs></sprite></sprites><nodeattrs></nodeattrs><edgeattrs></edgeattrs></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="random sentence from %&apos;node&apos;" type="reporter" category="network"><header></header><code></code><inputs><input type="%s">start</input></inputs><script><block s="doDeclareVariables"><list><l>rest</l><l>edge</l><l>sentence</l><l>word</l></list><comment w="90" collapsed="false">Generate random sentence according to FSM.</comment></block><block s="doIfElse"><block s="reportAnd"><block s="reportEquals"><block s="getNodeAttrib"><l>color</l><block var="node"/></block><l>yellow</l></block><block s="reportOr"><block s="reportEquals"><block s="reportListLength"><block s="getOutgoingEdges"><block var="node"/></block></block><l>0</l></block><block s="reportEquals"><block s="reportRandom"><l>0</l><l>1</l></block><l>1</l></block></block></block><script><block s="doReport"><l></l></block></script><script><block s="doIfElse"><block s="reportGreaterThan"><block s="reportListLength"><block s="getOutgoingEdges"><block var="node"/></block></block><l>0</l></block><script><block s="doSetVar"><l>edge</l><block s="getRandomFromList"><block s="getOutgoingEdges"><block var="node"/></block></block></block><block s="doSetVar"><l>word</l><block s="getRandomFromList"><block s="reportTextSplit"><block s="getEdgeAttrib"><l>label</l><block var="edge"/></block><l>;</l></block></block></block><block s="doSetVar"><l>rest</l><custom-block s="random sentence from %s"><block s="endNode"><block var="edge"/></block></custom-block></block><block s="doIfElse"><block s="reportEquals"><block var="rest"/><block s="reportFalse"></block></block><script><block s="doReport"><block s="reportFalse"></block></block></script><script><block s="doIfElse"><block s="reportGreaterThan"><block s="reportStringSize"><block var="word"/></block><l>0</l></block><script><block s="doReport"><block s="reportJoinWords"><list><block var="word"/><l> </l><block var="rest"/></list></block></block></script><script><block s="doReport"><block var="rest"/></block></script></block></script></block></script><script><block s="doReport"><block s="reportFalse"></block></block></script></block></script></block></script><password></password><salt></salt></block-definition><block-definition s="valid sentence %&apos;sentence&apos; from %&apos;start&apos; ?" type="predicate" category="network"><header></header><code></code><inputs><input type="%txt"></input><input type="%s">start</input></inputs><script><block s="doReport"><custom-block s="valid words %l from %s ?"><block s="reportTextSplit"><block var="sentence"/><l><option>whitespace</option></l></block><block var="start"/></custom-block></block></script><password></password><salt></salt></block-definition><block-definition s="valid words %&apos;words&apos; from %&apos;node&apos; ?" type="predicate" category="network"><header></header><code></code><inputs><input type="%l"></input><input type="%s">start</input></inputs><script><block s="doForEach"><l>edge</l><block s="getOutgoingEdges"><block var="node"/></block><script><block s="doForEach"><l>word</l><block s="reportTextSplit"><block s="getEdgeAttrib"><l>label</l><block var="edge"/></block><l>;</l></block><script><block s="doDeclareVariables"><list><l>morphemes</l><l>result</l></list></block><block s="doIfElse"><block s="reportGreaterThan"><block s="reportStringSize"><block var="word"/></block><l>0</l></block><script><block s="doSetVar"><l>morphemes</l><block s="reportTextSplit"><block var="word"/><l><option>whitespace</option></l></block></block><block s="doIf"><block s="reportAnd"><custom-block s="%l is a prefix of %l"><block var="morphemes"/><block var="words"/><comment w="151" collapsed="false">It would be better to check directly for string prefixes, but the relevant string predicates don&apos;t exist in Snap!</comment></custom-block><custom-block s="valid words %l from %s ?"><custom-block s="all but first %n of %l"><block s="reportListLength"><block var="morphemes"/></block><block var="words"/></custom-block><block s="endNode"><block var="edge"/></block></custom-block></block><script><block s="doReport"><block s="reportTrue"></block></block></script></block></script><script><block s="doIf"><custom-block s="valid words %l from %s ?"><block var="words"/><block s="endNode"><block var="edge"/></block></custom-block><script><block s="doReport"><block s="reportTrue"></block></block></script></block></script></block></script></block></script></block><block s="doIfElse"><block s="reportGreaterThan"><block s="reportListLength"><block var="words"/></block><l>0</l></block><script><block s="doReport"><block s="reportFalse"></block></block></script><script><block s="doReport"><block s="reportEquals"><block s="getNodeAttrib"><l>color</l><block var="node"/></block><l>yellow</l></block></block></script></block></script><password></password><salt></salt></block-definition><block-definition s="%&apos;prefix&apos; is a prefix of %&apos;list&apos;" type="predicate" category="lists"><header></header><code></code><inputs><input type="%l"></input><input type="%l"></input></inputs><script><block s="doIfElse"><block s="reportGreaterThan"><block s="reportListLength"><block var="prefix"/></block><l>0</l></block><script><block s="doIfElse"><block s="reportAnd"><block s="reportGreaterThan"><block s="reportListLength"><block var="list"/></block><l>0</l></block><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="prefix"/></block><block s="reportListItem"><l>1</l><block var="list"/></block></block></block><script><block s="doReport"><custom-block s="%l is a prefix of %l"><block s="reportCDR"><block var="prefix"/></block><block s="reportCDR"><block var="list"/></block></custom-block></block></script><script><block s="doReport"><block s="reportFalse"></block></block></script></block></script><script><block s="doReport"><block s="reportTrue"></block></block></script></block></script><password></password><salt></salt></block-definition><block-definition s="all but first %&apos;n&apos; of %&apos;l&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%n"></input><input type="%l"></input></inputs><script><block s="doIfElse"><block s="reportGreaterThan"><block var="n"/><l>0</l></block><script><block s="doReport"><custom-block s="all but first %n of %l"><block s="reportDifference"><block var="n"/><l>1</l></block><block s="reportCDR"><block var="l"/></block></custom-block></block></script><script><block s="doReport"><block var="l"/></block></script></block></script><password></password><salt></salt></block-definition></blocks><variables></variables></project>